
  
    <!DOCTYPE html>
<html lang="zh">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style type="text/css">
    	body {
				padding: 0;
				margin: 0;
			}
			#canvas {
				position: absolute;
				left: 50%;
				top: 0;
				transform: translateX(-50%);
				background-image:url(./image/bg.jpg);
			}
    </style>
    <title>五子棋</title>
  </head>
  <body>
    <canvas id="canvas" width="640" height="640">你的浏览器不支持HTML5 canvas，请使用google chrome浏览器打开</canvas>
    <script type="text/javascript">
    	!function(e){function i(f){if(r[f])return r[f].exports;var n=r[f]={exports:{},id:f,loaded:!1};return e[f].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var r={};return i.m=e,i.c=r,i.p="",i(0)}([function(e,i,r){var f=(r(1),r(2)),n=r(3),a=r(4);f.paintTable(),function(){var e=window.cache.canvas;window.cache.offsetX=e.offsetLeft-e.clientWidth/2}(),window.cache.canvas.onmousedown=function(e){e=e||window.event;var i,r=window.cache,s=r.chessValue,w=parseInt((e.pageX-20-r.offsetX)/40),u=parseInt((e.pageY-20)/40);return r.isblack?s[w][u]?void alert("此处不能落子！"):(s[w][u]=1,r.isblack=!1,f.drawChess(1,w,u),i=n(1,w,u),1===i?(r.iswin=1,alert("黑子赢!")):3===i&&(r.iswin=1,alert("平局！")),a(),void 0):void 0}},function(e,i){e.exports=function(){window.cache=window.cache||{},window.cache.data=window.cache.data||{},window.cache.canvas=document.querySelector("#canvas"),window.cache.table=window.cache.canvas.getContext("2d"),window.cache.chessValue=new Array(15);for(var e=0;15>e;e++){window.cache.chessValue[e]=new Array(15);for(var i=0;15>i;i++)window.cache.chessValue[e][i]=0}window.cache.black=new Image,window.cache.white=new Image,window.cache.black.src="image/black.png",window.cache.white.src="image/white.png",window.cache.iswin=0,window.cache.isblack=!0}()},function(e,i){var r={};r.paintTable=function(){var e=function(e,i,r){var f,n;"row"===i?(f=[0,640],n=[r,r]):(f=[r,r],n=[0,640]),e.beginPath(),e.lineWidth="4",e.strokeStyle="black",e.moveTo(f[0],n[0]),e.lineTo(f[1],n[1]),e.closePath(),e.stroke()};return function(){for(var i=window.cache.table,r=0;640>=r;r+=40)e(i,"row",r),e(i,"column",r)}}(),r.drawChess=function(e,i,r){var f=window.cache,n=f.table,a=f.iswin;1!==a&&(1===e?n.drawImage(f.black,40*i+20,40*r+20):2===e&&n.drawImage(f.white,40*i+20,40*r+20))},e.exports=r},function(e,i){e.exports=function(e,i,r){var f=window.cache.chessValue,n=count2=count3=count4=0,a=j=0,s=!1;for(a=0;15>a;a++){for(j=0;j<15;j++)if(!f[a][j]){s=!0;break}if(s)break}if(!s)return 3;for(a=i;a>=0&&f[a][r]===e;a--)n++;for(a=i+1;15>a&&f[a][r]===e;a++)n++;for(a=r;a>=0&&f[i][a]===e;a--)count2++;for(a=r+1;15>a&&f[i][a]===e;a++)count2++;for(a=i,j=r;a>=0&&j>=0&&f[a][j]===e;a--,j--)count3++;for(a=i+1,j=r+1;15>a&&j<15&&f[a][j]===e;a++,j++)count3++;for(a=i,j=r;a>=0&&j<=14&&f[a][j]===e;a--,j++)count4++;for(a=i+1,j=r-1;14>=a&&j>=0&&f[a][j]===e;a++,j--)count4++;if(n>=5||count2>=5||count3>=5||count4>=5){if(1===e)return 1;if(2===e)return 2}return 0}},function(e,i,r){var f=r(5),n=r(3),a=r(2);e.exports=function(){var e=window.cache,i=e.chessValue,r=function(){for(var e=[0,0,0],i=0;15>i;i++)for(var r=0;15>r;r++)e[0]+=f(i,r);return e},s=function(e,n,a,w){var u,o=0,b=0,t=[-1,0,0],c=a,l=w;if(2===e)return r();for(o=0;15>o;o++)for(b=0;15>b;b++)if(!i[o][b])if(1===n){var k=f(o,b);if(0===k)continue;if(i[o][b]=1,u=s(e+1,2,c,l),i[o][b]=0,u[0]<=a)return u;u[0]<l&&(l=u[0],t[0]=u[0],t[1]=o,t[2]=b)}else if(2===n){var k=f(o,b);if(0===k)continue;if(k>=99999||-5e4>=k)return t[0]=99999,t[1]=o,t[2]=b,t;if(i[o][b]=2,u=s(e+1,1,c,l),i[o][b]=0,u[0]>=w)return u;u[0]>c&&(c=u[0],t[0]=u[0],t[1]=o,t[2]=b)}return t};return function(){var r,f,w,u=[-1,0,0];1!=e.iswin&&(u=s(0,2,-1e6,1e6),r=u[1],f=u[2],e.isblack=!0,a.drawChess(2,r,f),i[r][f]=2,w=n(2,r,f),2==w?(e.iswin=1,alert("白子赢!")):3===w&&(e.iswin=1,alert("平局！")))}}()},function(e,i){e.exports=function(e,i){var r=window.cache.chessValue,f=0,n=b2=b3=b4=1,a=w2=w3=w4=1,s=[0,0,0,0],w=[0,0,0,0],u=!1,o=!1,b=!1,t=!1;if(0>e||0>i||e>14||i>14)return-1;if(r[e][i])return-1;if(u=!1,o=!1,b=!1,t=!1,0===e)u=!0,b=!0;else if(e>=1){for(var c=e-1;c>=0&&!(e-4>c);c--){if(2!==r[c][i]){if(1==r[c][i]){b=!0;break}break}if(a++,0===c){b=!0;break}}for(var c=e-1;c>=0&&!(e-4>c);c--){if(1!==r[c][i]){if(2===r[c][i]){u=!0;break}break}if(n++,0===c){u=!0;break}}}if(14===e)o=!0,t=!0;else if(13>=e){for(var c=e+1;14>=c&&!(c>e+4);c++){if(2!==r[c][i]){if(1===r[c][i]){t=!0;break}break}if(a++,14===c){t=!0;break}}for(var c=e+1;14>=c&&!(c>e+4);c++){if(1!==r[c][i]){if(2===r[c][i]){o=!0;break}break}if(n++,14===c){o=!0;break}}}if(b||t){if(b&&!t||!b&&t){if(2===a)w[0]=1;else if(3===a)w[0]=3;else if(4===a)w[0]=5;else if(5===a)return f=99999}else if(5===a)return f=99999}else if(2===a)w[0]=2;else if(3===a)w[0]=4;else if(4===a)w[0]=6;else if(5===a)return f=99999;if(u||o){if(u&&!o||!u&&o){if(2===n)s[0]=1;else if(3===n)s[0]=3;else if(4===n)s[0]=5;else if(5===n)return f=-5e4}else if(5===n)return f=-5e4}else if(2===n)s[0]=2;else if(3===n)s[0]=4;else if(4===n)s[0]=6;else if(5===n)return f=-5e4;if(u=!1,o=!1,b=!1,t=!1,0===i)u=!0,b=!0;else if(i>=1){for(var c=i-1;c>=0&&!(i-4>c);c--){if(2!==r[e][c]){if(1===r[e][c]){b=!0;break}break}if(w2++,0===c){b=!0;break}}for(var c=i-1;c>=0&&!(i-4>c);c--){if(1!==r[e][c]){if(2===r[e][c]){u=!0;break}break}if(b2++,0===c){u=!0;break}}}if(14===i)o=!0,t=!0;else if(13>=i){for(var c=i+1;14>=c&&!(c>i+4);c++){if(2!==r[e][c]){if(1===r[e][c]){t=!0;break}break}if(w2++,14===c){t=!0;break}}for(var c=i+1;14>=c&&!(c>i+4);c++){if(1!==r[e][c]){if(2===r[e][c]){o=!0;break}break}if(b2++,14===c){o=!0;break}}}if(b||t){if(b&&!t||!b&&t){if(2===w2)w[1]=1;else if(3===w2)w[1]=3;else if(4===w2)w[1]=5;else if(5===w2)return f=99999}else if(5===w2)return f=99999}else if(2===w2)w[1]=2;else if(3===w2)w[1]=4;else if(4===w2)w[1]=6;else if(5===w2)return f=99999;if(u||o){if(u&&!o||!u&&o){if(2===b2)s[1]=1;else if(3===b2)s[1]=3;else if(4===b2)s[1]=5;else if(5===b2)return f=-5e4}else if(5===b2)return f=-5e4}else if(2===b2)s[1]=2;else if(3===b2)s[1]=4;else if(4===b2)s[1]=6;else if(5===b2)return f=-5e4;if(u=!1,o=!1,b=!1,t=!1,0===i||0===e)u=!0,b=!0;else if(e>=1&&i>=1){for(var c=e-1,l=i-1;c>=0&&l>=0&&!(e-4>c);c--,l--){if(2!==r[c][l]){if(1===r[c][l]){b=!0;break}break}if(w3++,0===c||0===l){b=!0;break}}for(var c=e-1,l=i-1;c>=0&&l>=0&&!(e-4>c);c--,l--){if(1!==r[c][l]){if(2===r[c][l]){u=!0;break}break}if(b3++,0===c||0===l){u=!0;break}}}if(14===i||14===e)o=!0,t=!0;else if(13>=i&&13>=e){for(var c=e+1,l=i+1;14>=c&&14>=l&&!(c>e+4);c++,l++){if(2!==r[c][l]){if(1===r[c][l]){t=!0;break}break}if(w3++,14===c||14===l){t=!0;break}}for(var c=e+1,l=i+1;14>=c&&14>=l&&!(c>e+4);c++,l++){if(1!==r[c][l]){if(2===r[c][l]){o=!0;break}break}if(b3++,14===c||14===l){o=!0;break}}}if(b||t){if(b&&!t||!b&&t){if(2===w3)w[2]=1;else if(3===w3)w[2]=3;else if(4===w3)w[2]=5;else if(5===w3)return f=99999}else if(5===w3)return f=99999}else if(2===w3)w[2]=2;else if(3===w3)w[2]=4;else if(4===w3)w[2]=6;else if(5===w3)return f=99999;if(u||o){if(u&&!o||!u&&o){if(2===b3)s[2]=1;else if(3===b3)s[2]=3;else if(4===b3)s[2]=5;else if(5===b3)return f=-5e4}else if(5===b3)return f=-5e4}else if(2===b3)s[2]=2;else if(3===b3)s[2]=4;else if(4===b3)s[2]=6;else if(5===b3)return f=-5e4;if(u=!1,o=!1,b=!1,t=!1,0===i||14===e)u=!0,b=!0;else if(13>=e&&i>=1){for(var c=e+1,l=i-1;14>=c&&l>=0&&!(c>e+4);c++,l--)if(2===r[c][l]){if(w4++,14===c||0===l){b=!0;break}}else{if(0===r[c][l]){if(14===c||0===l){b=!0;break}break}if(1===r[c][l]){b=!0;break}}for(var c=e+1,l=i-1;14>=c&&l>=0&&!(c>e+4);c++,l--)if(1===r[c][l]){if(b4++,14===c||0===l){u=!0;break}}else{if(0===r[c][l]){if(14===c||0===l){u=!0;break}break}if(2===r[c][l]){u=!0;break}}}if(14===i||0===e)o=!0,t=!0;else if(13>=i&&e>=1){for(var c=e-1,l=i+1;c>=1&&14>=l&&!(e-4>c);c--,l++)if(2===r[c][l]){if(w4++,0===c||14===l){t=!0;break}}else{if(0===r[c][l]){if(0===c||14===l){t=!0;break}break}if(1===r[c][l]){t=!0;break}}for(var c=e-1,l=i+1;c>=1&&14>=l&&!(e-4>c);c--,l++)if(1===r[c][l]){if(b4++,0===c||14===l){o=!0;break}}else{if(0===r[c][l]){if(0===c||14===l){o=!0;break}break}if(2===r[c][l]){o=!0;break}}}if(b||t){if(b&&!t||!b&&t){if(2===w4)w[3]=1;else if(3===w4)w[3]=3;else if(4===w4)w[3]=5;else if(5===w4)return f=99999}else if(5===w4)return f=99999}else if(2===w4)w[3]=2;else if(3===w4)w[3]=4;else if(4===w4)w[3]=6;else if(5===w4)return f=99999;if(u||o){if(u&&!o||!u&&o){if(2===b4)s[3]=1;else if(3===b4)s[3]=3;else if(4===b4)s[3]=5;else if(5===b4)return f=-5e4}else if(5===b4)return f=-5e4}else if(2===b4)s[3]=2;else if(3===b4)s[3]=4;else if(4===b4)s[3]=6;else if(5===b4)return f=-5e4;for(var k=wnum2=wnum3=wnum4=wnum5=wnum6=0,m=bnum2=bnum3=bnum4=bnum5=bnum6=0,c=0;4>c;c++)6===w[c]?wnum6++:5===w[c]?wnum5++:4===w[c]?wnum4++:3===w[c]?wnum3++:2===w[c]?wnum2++:1===w[c]&&k++,6===s[c]?bnum6++:5===s[c]?bnum5++:4===s[c]?bnum4++:3===s[c]?bnum3++:2===s[c]?bnum2++:1===s[c]&&m++;return f=wnum6>=1?1e4:wnum5>=2?1e4:1===wnum5&&wnum4>=1?7e3:wnum4>=2?5e3:1===wnum4?1e3:1===wnum5?800:wnum3>=2?500:1===wnum3?200:wnum2>=2?125:1===wnum2?100:k>=2?70:1===k?50:0,f-=bnum6>=1?6500:bnum5>=2?6500:1==bnum5&&bnum4>=1?6e3:bnum4>=2?4e3:1==bnum4?750:1==bnum5?600:bnum3>=2?300:1==bnum3?150:bnum2>=2?110:1==bnum2?30:m>=2?30:1==m?10:0}}]);
    </script>
  </body>
</html>
  
